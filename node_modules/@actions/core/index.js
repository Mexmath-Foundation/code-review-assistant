const process = require('process');

function toInputKey(name) {
  return `INPUT_${name.replace(/ /g, '_').toUpperCase()}`;
}

function getInput(name, options = {}) {
  if (!name) {
    throw new Error('Input name must be provided');
  }

  const key = toInputKey(name);
  const value = process.env[key] ?? '';

  if (!value && options.required) {
    throw new Error(`Input required and not supplied: ${name}`);
  }

  return options.trim === false ? value : value.trim();
}

function setFailed(message) {
  if (message) {
    console.error(message);
  }

  process.exitCode = 1;
}

function info(message) {
  console.log(message);
}

module.exports = {
  getInput,
  setFailed,
  info
};
