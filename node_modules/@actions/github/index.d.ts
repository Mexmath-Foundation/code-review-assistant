export interface RepositoryContext {
  owner?: string;
  repo?: string;
}

export interface PullRequestPayload {
  pull_request?: {
    number?: number;
  };
  repository?: {
    name?: string;
    owner?: {
      login?: string;
    };
  };
}

export interface ListFilesParams {
  owner: string;
  repo: string;
  pull_number: number;
  per_page?: number;
  page?: number;
}

export interface FileListResponse {
  data: Array<{ filename: string }>;
}

export type PaginateMap<TInput, TOutput> = (value: TInput) => TOutput;

export interface Octokit {
  rest: {
    pulls: {
      listFiles(params: ListFilesParams): Promise<FileListResponse>;
    };
  };
}

export const context: {
  payload: PullRequestPayload;
  repo: RepositoryContext;
};

export function getOctokit(token: string): Octokit;

export function paginate<TResponse, TResult>(
  method: (parameters: ListFilesParams) => Promise<TResponse>,
  parameters: ListFilesParams,
  mapFn: PaginateMap<TResponse, TResult[]>
): Promise<TResult[]>;
